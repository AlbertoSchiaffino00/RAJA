<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Continuous Integration (CI) Testing &mdash; RAJA 2022.03.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Continuous Integration (CI) Testing Maintenance Tasks" href="ci_tasks.html" />
    <link rel="prev" title="RAJA Build Configurations" href="build_configurations.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> RAJA
            <img src="../../_static/RAJA_LOGO_CMYK_White_Background_large.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.03
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">RAJA User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">RAJA Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing to RAJA</a></li>
<li class="toctree-l2"><a class="reference internal" href="branch_development.html">RAJA Branch Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_configurations.html">RAJA Build Configurations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Continuous Integration (CI) Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gitlab-ci">Gitlab CI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#constraints">Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gitlab-ci-lc-testing-workflow">Gitlab CI (LC) Testing Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gitlab-ci-lc-testing-files">Gitlab CI (LC) Testing Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#azure-pipelines-ci">Azure Pipelines CI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#azure-pipelines-testing-workflow">Azure Pipelines Testing Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker-builds">Docker Builds</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ci_tasks.html">Continuous Integration (CI) Testing Maintenance Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html">RAJA Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_process.html">RAJA Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="versioning.html">RAJA Release Version Naming</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../raja_license.html">RAJA Copyright and License Information</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">RAJA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">RAJA Developer Guide</a> &raquo;</li>
      <li>Continuous Integration (CI) Testing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/sphinx/dev_guide/ci.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="continuous-integration-ci-testing">
<span id="ci-label"></span><h1>Continuous Integration (CI) Testing<a class="headerlink" href="#continuous-integration-ci-testing" title="Permalink to this headline">¶</a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>All CI test checks must pass before a pull request can be
merged.</p></li>
<li><p>The status (pass/fail and run) for all checks can be viewed by
clicking the appropriate link in the <strong>checks</strong> section of a
GitHub pull request.</p></li>
</ul>
</div>
<p>The CI tools used by the RAJA project, and which integrate with GitHub are:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Azure Pipelines</strong> runs builds and tests for Linux, Windows, and MacOS
environments using recent versions of various compilers. While we do GPU
builds for CUDA, HIP, and SYCL on Azure, RAJA tests are only run for
CPU-only pipelines. See the
<a class="reference external" href="https://dev.azure.com/llnl/RAJA">RAJA Azure DevOps</a> project to learn
more about our testing there.</p></li>
<li><p><strong>Gitlab</strong> instances in the Livermore Computing (LC) Center
runs builds and tests in LC resource and compiler environments
important to many RAJA user applications. Execution of RAJA CI
pipelines on LC Gitlab resources has restrictions described below. If
you have access to LC resources, you can access additional information about
<a class="reference external" href="https://lc.llnl.gov/confluence/display/GITLAB/GitLab+CI">LC GitLab CI</a></p></li>
</ul>
</div></blockquote>
<p>The tools automatically run RAJA builds and tests when a PR is created and
when changes are pushed to a PR branch.</p>
<p>The following sections describe basic elements of the operation of the CI tools.</p>
<section id="gitlab-ci">
<span id="gitlab-ci-label"></span><h2>Gitlab CI<a class="headerlink" href="#gitlab-ci" title="Permalink to this headline">¶</a></h2>
<p>The Gitlab CI instance used by the RAJA project lives in the Livermore
Computing (LC) Collaboration Zone (CZ). It runs builds and tests in LC
resource and compiler environments important to RAJA user applications at LLNL.</p>
<section id="constraints">
<h3>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h3>
<p>Running Gitlab CI on Livermore Computing (LC) resources is constrained by LC
security policies. The policies require that all members of a GitHub project
be members of the LLNL GitHub organization and have two-factor authentication
enabled on their GitHub accounts to automatically mirror a GitHub repo and
trigger Gitlab CI functionality from GitHub. For compliant LLNL GitHub projects,
auto-mirroring of the GitHub repo on LC Gitlab is done when changes are pushed
to PRs for branches in the RAJA repo, but not for PRs for a branch on a fork of
the repo. An alternative procedure we use to handle this is described in
<a class="reference internal" href="contributing.html#contributing-label"><span class="std std-ref">Contributing to RAJA</span></a>. If you have access to LC resources, you can learn
more about <a class="reference external" href="https://lc.llnl.gov/confluence/pages/viewpage.action?pageId=662832265">LC Gitlab mirroring</a>.</p>
</section>
<section id="gitlab-ci-lc-testing-workflow">
<h3>Gitlab CI (LC) Testing Workflow<a class="headerlink" href="#gitlab-ci-lc-testing-workflow" title="Permalink to this headline">¶</a></h3>
<p>The figure below shows the high-level steps in the RAJA Gitlab CI testing
process. The main steps, which we will discuss in more detail later, are:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A <em>mirror</em> of the RAJA GitHub repo in the RAJA Gitlab project is updated
whenever the RAJA <code class="docutils literal notranslate"><span class="pre">develop</span></code> or <code class="docutils literal notranslate"><span class="pre">main</span></code> branches are changed as well
as when any PR branch in the RAJA GitHub project is changed.</p></li>
<li><p>Gitlab launches CI test pipelines. While running, the execution and
pass/fail status may be viewed and monitored in the Gitlab CI GUI.</p></li>
<li><p>For each resource and compiler combination,
<a class="reference external" href="https://github.com/spack/spack">Spack</a> is used to generate a build
configuration in the form of a CMake cache file, or <em>host-config</em> file.</p></li>
<li><p>A host-config file is passed to CMake, which configures a RAJA build
space.  Then, RAJA and its tests are compiled.</p></li>
<li><p>Next, the RAJA tests are run.</p></li>
<li><p>When a test pipeline completes, final results are reported in Gitlab.</p></li>
</ol>
</div></blockquote>
<p>In the next section, we will describe the roles that specific files in the
RAJA repo play in defining these steps.</p>
<figure class="align-default" id="id1">
<img alt="../../_images/RAJA-Gitlab-Workflow2.png" src="../../_images/RAJA-Gitlab-Workflow2.png" />
<figcaption>
<p><span class="caption-text">The main steps in the RAJA Gitlab CI testing workflow are shown in the
figure. This process is triggered when a developer makes a PR on the
GitHub project or whenever changes are pushed to the source branch of a PR.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="gitlab-ci-lc-testing-files">
<h3>Gitlab CI (LC) Testing Files<a class="headerlink" href="#gitlab-ci-lc-testing-files" title="Permalink to this headline">¶</a></h3>
<p>The following figure shows directories and files in the RAJA repo that
support LC Gitlab CI testing. Files with names in blue are specific to RAJA
and are maintained by the RAJA team. Directories and files with names in red are
in Git submodules, shared and maintained with other projects.</p>
<figure class="align-default" id="id2">
<img alt="../../_images/RAJA-Gitlab-Files.png" src="../../_images/RAJA-Gitlab-Files.png" />
<figcaption>
<p><span class="caption-text">The figure shows directories and files in the RAJA repo that support Gitlab
CI testing. Files in blue are specific to RAJA and owned by the RAJA team.
Red directories and files are part of Git submodules shared with other
projects.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>In the following sections, we discuss how these files are used in the
steps in the RAJA Gitlab CI testing process summarized above.</p>
<section id="launching-ci-pipelines-step-2">
<h4>Launching CI pipelines (step 2)<a class="headerlink" href="#launching-ci-pipelines-step-2" title="Permalink to this headline">¶</a></h4>
<p>In <strong>step 2</strong> of the diagram above, Gitlab launches RAJA test pipelines.
The <a class="reference external" href="https://github.com/LLNL/RAJA/blob/develop/.gitlab-ci.yml">RAJA/.gitlab-ci.yml</a> file contains high-level testing information,
such as stages (resource allocation, build-and-test, and resource
deallocation) and locations of files that define which jobs will run
in each pipeline. For example, these items appear in the file as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stages</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">r_allocate_resources</span>
  <span class="o">-</span> <span class="n">r_build_and_test</span>
  <span class="o">-</span> <span class="n">r_release_resources</span>
  <span class="o">-</span> <span class="n">l_build_and_test</span>
  <span class="o">-</span> <span class="n">c_build_and_test</span>
  <span class="o">-</span> <span class="n">multi_project</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">include</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">local</span><span class="p">:</span> <span class="o">.</span><span class="n">gitlab</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="n">templates</span><span class="o">.</span><span class="n">yml</span>
  <span class="o">-</span> <span class="n">local</span><span class="p">:</span> <span class="o">.</span><span class="n">gitlab</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="n">jobs</span><span class="o">.</span><span class="n">yml</span>
  <span class="o">-</span> <span class="n">local</span><span class="p">:</span> <span class="o">.</span><span class="n">gitlab</span><span class="o">/</span><span class="n">lassen</span><span class="o">-</span><span class="n">templates</span><span class="o">.</span><span class="n">yml</span>
  <span class="o">-</span> <span class="n">local</span><span class="p">:</span> <span class="o">.</span><span class="n">gitlab</span><span class="o">/</span><span class="n">lassen</span><span class="o">-</span><span class="n">jobs</span><span class="o">.</span><span class="n">yml</span>
  <span class="o">-</span> <span class="n">local</span><span class="p">:</span> <span class="o">.</span><span class="n">gitlab</span><span class="o">/</span><span class="n">corona</span><span class="o">-</span><span class="n">templates</span><span class="o">.</span><span class="n">yml</span>
  <span class="o">-</span> <span class="n">local</span><span class="p">:</span> <span class="o">.</span><span class="n">gitlab</span><span class="o">/</span><span class="n">corona</span><span class="o">-</span><span class="n">jobs</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">stages</span></code> section above, prefixes ‘<a href="#id3"><span class="problematic" id="id4">r_</span></a>’, ‘<a href="#id5"><span class="problematic" id="id6">l_</span></a>’, and ‘<a href="#id7"><span class="problematic" id="id8">c_</span></a>’ refer to
resources in the LC on which tests are run. Specifically, the machines ‘ruby’,
‘lassen’, and ‘corona’, respectively. Jobs that will run in pipeline(s) on each
resource are defined in the files listed in the <code class="docutils literal notranslate"><span class="pre">include</span></code> section above.
Note that the stage labels above appear on each Gitlab CI run web page as the
title of a column containing other information about what is run in that stage,
such as build and test jobs.</p>
<p>The <a class="reference external" href="https://github.com/LLNL/RAJA/tree/develop/.gitlab">RAJA/.gitlab</a>
directory contains a <em>templates</em> and <em>jobs</em> file for each LC resource on which
test pipelines will be run. The <code class="docutils literal notranslate"><span class="pre">&lt;resource&gt;-templates.yml</span></code> files contain
information that is common across jobs that run on the corresponding resource,
such as commands and scripts that are run for stages identified in the
<code class="docutils literal notranslate"><span class="pre">RAJA/.gitlab-ci.yml</span></code> file. For example, the
<code class="docutils literal notranslate"><span class="pre">RAJA/.gitlab/ruby-templates.yml</span></code> file contains a section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>allocate_resources (on ruby):
  variables:
    GIT_STRATEGY: none
  extends: .on_ruby
  stage: r_allocate_resources
  script:
    - salloc -N 1 -p pdebug -t 45 --no-shell --job-name=${ALLOC_NAME}
</pre></div>
</div>
<p>which contains the resource allocation command associated with the
<code class="docutils literal notranslate"><span class="pre">r_allocate_resources</span></code> stage identifier on ‘ruby’. Analogous stages are
defined similarly in other <code class="docutils literal notranslate"><span class="pre">RAJA/.gitlab/&lt;resource&gt;-templates.yml</span></code> files.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;resource&gt;-jobs.yml</span></code> files are described in the following sections.</p>
</section>
<section id="running-a-ci-build-test-pipeline-steps-3-4-5-6">
<h4>Running a CI build/test pipeline  (steps 3, 4, 5, 6)<a class="headerlink" href="#running-a-ci-build-test-pipeline-steps-3-4-5-6" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference external" href="https://github.com/LLNL/RAJA/tree/develop/scripts/gitlab/build_and_test.sh">RAJA/scripts/gitlab/build_and_test.sh</a> file defines the steps executed
for each build and test run as well as information that will appear in the
log output for each step. First, the script invokes the
<code class="docutils literal notranslate"><span class="pre">RAJA/scripts/uberenv/uberenv.py</span></code> Python script located in the
<a class="reference external" href="https://github.com/LLNL/uberenv">uberenv</a> submodule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>...

python3 scripts/uberenv/uberenv.py --spec=&quot;${spec}&quot; ${prefix_opt}

...
</pre></div>
</div>
<p>Project specific settings related to which Spack version to use, where
Spack packages live, etc. are located in the
<a class="reference external" href="https://github.com/LLNL/RAJA/blob/develop/.uberenv_config.json">RAJA/.uberenv_config.json</a> file.</p>
<p>The uberenv python script invokes Spack to generate a CMake <em>host-config</em>
file containing a RAJA build specification <strong>(step 3)</strong>. To generate
a <em>host-config</em> file, Spack uses the
<a class="reference external" href="https://github.com/LLNL/RAJA/blob/develop/scripts/spack_packages/raja/package.py">RAJA Spack package</a>, plus <em>Spack spec</em> information.
The <code class="docutils literal notranslate"><span class="pre">RAJA/.gitlab/&lt;resource&gt;-jobs.yml</span></code> file defines a build specification
(<em>Spack spec</em>) for each job that will be run on the corresponding resource.
For example, in the <code class="docutils literal notranslate"><span class="pre">lassen-jobs.yml</span></code> file, you will see an entry such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc_8_3_1_cuda_10_1_168</span><span class="p">:</span>
  <span class="n">variables</span><span class="p">:</span>
    <span class="n">SPEC</span><span class="p">:</span> <span class="s2">&quot;+cuda </span><span class="si">%g</span><span class="s2">cc@8.3.1 cuda_arch=70 ^cuda@10.1.168&quot;</span>
  <span class="n">extends</span><span class="p">:</span> <span class="o">.</span><span class="n">build_and_test_on_lassen</span>
</pre></div>
</div>
<p>This defines the <em>Spack spec</em> for the test job in which CUDA device code will
be built with the nvcc 10.1.168 compiler and non-device code will be compiled
with the GNU 8.3.1 compiler. In the Gitlab CI GUI, this pipeline will be
labeled <code class="docutils literal notranslate"><span class="pre">gcc_8_3_1_cuda_10_1_168</span></code>. Details for compilers, such as file
system paths, target architecture, etc. are located in the
<code class="docutils literal notranslate"><span class="pre">RAJA/scripts/radiuss-spack-configs/&lt;sys-type&gt;/compilers.yaml</span></code> file for the
system type associated with the resource. Analogous information for packages
like CUDA and ROCm (HIP) are located in the corresponding
<code class="docutils literal notranslate"><span class="pre">RAJA/scripts/radiuss-spack-configs/&lt;sys-type&gt;/packages.yaml</span></code> file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please see <a class="reference internal" href="build_configurations.html#spack-host-config-label"><span class="std std-ref">Spack-Generated Host-Config Files</span></a> for more information about
Spack-generated host-config files and how to use them for local
debugging.</p>
</div>
<p>After the host-config file is generated, the
<code class="docutils literal notranslate"><span class="pre">scripts/gitlab/build_and_test.sh</span></code> script creates a build space directory
and runs CMake in it, passing the host-config (cache) file. Then, it builds
the RAJA code and tests <strong>(step 4)</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>...

build_dir=&quot;${build_root}/build_${hostconfig//.cmake/}&quot;

...

date
echo &quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;
echo &quot;~ Host-config: ${hostconfig_path}&quot;
echo &quot;~ Build Dir:   ${build_dir}&quot;
echo &quot;~ Project Dir: ${project_dir}&quot;
echo &quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;
echo &quot;&quot;

echo &quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;
echo &quot;~~~~~ Building RAJA&quot;
echo &quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;

rm -rf ${build_dir} 2&gt;/dev/null
mkdir -p ${build_dir} &amp;&amp; cd ${build_dir}

...

cmake \
  -C ${hostconfig_path} \
  ${project_dir}

cmake --build . -j ${core_counts[$truehostname]}
</pre></div>
</div>
<p>Next, it runs the tests <strong>(step 5)</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>echo &quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;
echo &quot;~~~~~ Testing RAJA&quot;
echo &quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;

...

cd ${build_dir}

...

ctest --output-on-failure -T test 2&gt;&amp;1 | tee tests_output.txt
</pre></div>
</div>
<p>Lastly, the script packages the test results into a JUnit XML file that
Gitlab uses for reporting the results in its GUI <strong>(step 6)</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>echo &quot;Copying Testing xml reports for export&quot;
tree Testing
xsltproc -o junit.xml ${project_dir}/blt/tests/ctest-to-junit.xsl Testing/*/Test.xml
mv junit.xml ${project_dir}/junit.xml
</pre></div>
</div>
<p>The commands shown here intermingle with other commands that emit messages,
timing information for various operations, etc. which appear in a log
file that can be viewed in the Gitlab GUI.</p>
</section>
</section>
</section>
<section id="azure-pipelines-ci">
<span id="azure-ci-label"></span><h2>Azure Pipelines CI<a class="headerlink" href="#azure-pipelines-ci" title="Permalink to this headline">¶</a></h2>
<p>The Azure Pipelines tool builds and tests for Linux, Windows, and MacOS
environments.  While we do builds for CUDA, HIP, and SYCL RAJA back-ends
in the Azure Linux environment, RAJA tests are only run for CPU-only pipelines.</p>
<section id="azure-pipelines-testing-workflow">
<h3>Azure Pipelines Testing Workflow<a class="headerlink" href="#azure-pipelines-testing-workflow" title="Permalink to this headline">¶</a></h3>
<p>The Azure Pipelines testing workflow for RAJA is much simpler than the Gitlab
testing process described above.</p>
<p>The test jobs we run for each OS environment are specified in the
<a class="reference external" href="https://github.com/LLNL/RAJA/blob/develop/azure-pipelines.yml">RAJA/azure-pipelines.yml</a> file. This file defines the job steps, commands,
compilers, etc. for each OS environment in the associated <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">job:</span></code> section.
A summary of the configurations we build are:</p>
<blockquote>
<div><ul>
<li><p><strong>Windows.</strong> The <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">job:</span> <span class="pre">Windows</span></code> Windows section contains information
for the Windows test builds. For example, we build and test RAJA as
a static and shared library. This is indicated in the Windows <code class="docutils literal notranslate"><span class="pre">strategy</span></code>
section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">strategy</span><span class="p">:</span>
  <span class="n">matrix</span><span class="p">:</span>
    <span class="n">shared</span><span class="p">:</span>
      <span class="o">...</span>
    <span class="n">static</span><span class="p">:</span>
      <span class="o">...</span>
</pre></div>
</div>
<p>We use the Windows/compiler image provided by the Azure application
indicated the <code class="docutils literal notranslate"><span class="pre">pool</span></code> section; for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pool</span><span class="p">:</span>
  <span class="n">vmImage</span><span class="p">:</span> <span class="s1">&#39;windows-2019&#39;</span>
</pre></div>
</div>
<p><strong>MacOS.</strong> The <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">job:</span> <span class="pre">Mac</span></code> section contains information for Mac test
builds. For example, we build RAJA using the the MacOS/compiler
image provided by the Azure application indicated in the <code class="docutils literal notranslate"><span class="pre">pool</span></code> section;
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pool</span><span class="p">:</span>
  <span class="n">vmImage</span><span class="p">:</span> <span class="s1">&#39;macOS-latest&#39;</span>
</pre></div>
</div>
<p><strong>Linux.</strong> The <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">job:</span> <span class="pre">Docker</span></code> section contains information for Linux
test builds. We build and test RAJA using Docker container images generated
with recent versions of various compilers. The RAJA project shares these
images with other open-source LLNL RADIUSS projects and they are maintained
in the <a class="reference external" href="https://github.com/rse-ops/docker-images">RES-ops Docker</a>
project on GitHub. The builds we do at any point in time are located in
the <code class="docutils literal notranslate"><span class="pre">strategy</span></code> block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">strategy</span><span class="p">:</span>
  <span class="n">matrix</span><span class="p">:</span>
    <span class="n">gccX</span><span class="p">:</span>
      <span class="n">docker_target</span><span class="p">:</span> <span class="o">...</span>
    <span class="o">...</span>
    <span class="n">clangY</span><span class="p">:</span>
      <span class="n">docker_target</span><span class="p">:</span> <span class="o">...</span>
    <span class="o">...</span>
    <span class="n">nvccZ</span><span class="p">:</span>
      <span class="n">docker_target</span><span class="p">:</span> <span class="o">...</span>

    <span class="o">...</span>
</pre></div>
</div>
<p>The Linux OS the docker images are run on is indicated in the <code class="docutils literal notranslate"><span class="pre">pool</span></code> section;
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pool</span><span class="p">:</span>
  <span class="n">vmImage</span><span class="p">:</span> <span class="s1">&#39;ubuntu-latest&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</section>
<section id="docker-builds">
<h3>Docker Builds<a class="headerlink" href="#docker-builds" title="Permalink to this headline">¶</a></h3>
<p>For each Linux/Docker pipeline, the base container images, CMake, build, and
test commands are located in <a class="reference external" href="https://github.com/LLNL/RAJA/blob/develop/Dockerfile">RAJA/Dockerfile</a>.</p>
<p>The base container images are built and maintained through the <a class="reference external" href="https://rse-ops.github.io/">RSE-Ops</a> RADIUSS project. A table of the most up to date containers can be found <a class="reference external" href="https://rse-ops.github.io/docker-images/">here</a>. These images are rebuilt regularly ensuring that we have the most up to date builds of each container / compiler.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please see <a class="reference internal" href="build_configurations.html#docker-local-label"><span class="std std-ref">Reproducing Docker Builds Locally</span></a> for more information about
reproducing Docker builds locally for debugging purposes.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="build_configurations.html" class="btn btn-neutral float-left" title="RAJA Build Configurations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ci_tasks.html" class="btn btn-neutral float-right" title="Continuous Integration (CI) Testing Maintenance Tasks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, Lawrence Livermore National Security, LLNS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>